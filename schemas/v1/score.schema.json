{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ciacob.github.io/OpenScoreIR/schemas/v1/score.schema.json",
  "title": "OpenScoreIR â€” Score",
  "definitions": {
    "DocInfo": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string",
          "pattern": "^(0|[1-9][0-9]*)\\.(0|[1-9][0-9]*)\\.(0|[1-9][0-9]*)(?:-((?:0|[1-9][0-9]*|[A-Za-z-][0-9A-Za-z-]*)(?:\\.(?:0|[1-9][0-9]*|[A-Za-z-][0-9A-Za-z-]*))*))?(?:\\+([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?$"
        },
        "release": {
          "$comment": "We only expect UTC timestamps here, this is implicit.",
          "type": "string",
          "pattern": "^[0-9]{4}\\/(0[1-9]|1[0-2])\\/(0[1-9]|[12][0-9]|3[01]) ([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$"
        }
      },
      "required": [
        "version"
      ]
    }
  },
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string"
    },
    "$$docInfo": {
      "$ref": "#/definitions/DocInfo"
    },
    "$definitions": {
      "type": "object",
      "properties": {
        "parts": {
          "$ref": "./common.schema.json#/definitions/PartDefinitions"
        },
        "attachments": {
          "$ref": "./attachables.schema.json#/definitions/AttachableDefinitions"
        },
        "percussionSets": {
          "$ref": "./common.schema.json#/definitions/PercussionSetDefinitions"
        },
        "midiModels": {
          "$ref": "./attachables.schema.json#/definitions/AttachableDefinitions"
        }
      },
      "minProperties": 1,
      "additionalProperties": false
    },
    "$instances": {
      "type": "object",
      "properties": {
        "parts": {
          "$ref": "./common.schema.json#/definitions/PartInstances"
        },
        "measures": {
          "$ref": "./common.schema.json#/definitions/MeasureInstances"
        }
      },
      "required": [
        "parts",
        "measures"
      ],
      "additionalProperties": false
    },
    "$lists": {
      "type": "object",
      "properties": {
        "parts": {
          "$ref": "./common.schema.json#/definitions/Uuids"
        },
        "measures": {
          "$ref": "./common.schema.json#/definitions/Uuids"
        }
      },
      "required": [
        "parts",
        "measures"
      ],
      "additionalProperties": false
    },
    "scoreInfo": {
      "$ref": "./common.schema.json#/definitions/ScoreInfo"
    },
    "musicSpans": {
      "$ref": "./events.schema.json#/definitions/MusicSpans"
    }
  },
  "required": [
    "$$docInfo",
    "$instances",
    "$lists",
    "musicSpans"
  ],
  "additionalProperties": false
}